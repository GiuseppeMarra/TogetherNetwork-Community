{% extends "layout_activities.html" %}

{% block container %}
<div id="mainContainer">
    {% for activity in activities %}
    <div class="activity-box" id="activity-box-{{ activity.pk }}">
   		<div class="activity-category-corner-red"></div>
   		<div class="activity-box-content" id="activity-box-content-{{ activity.pk }}">
   			{{ activity.title }}
   		</div>
   		<a href="#{{ activity.get_absolute_url }}">
   			<div id="activity-button-{{ activity.pk }}" class="activity-box-button">Join</div>
   		</a>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
    {% for activity in activities %}
    <script type="text/javascript">
        $(function(){
            var currenct_activity_box = $("#activity-box-{{ activity.pk }}");
            {% if activity.photo %} // Using the right background:
            currenct_activity_box.css("background-image","url('{{ activity.photo.url }}')");
            {% endif %}
            // Enabling join button fade effect
            currenct_activity_box.hover(function(){
                $("#activity-button-{{ activity.pk }}").fadeIn(250);
            },function(){
                $("#activity-button-{{ activity.pk }}").fadeOut(250);
            });
        });
    </script>
    {% endfor %}

    <script type="text/javascript">
        // Resizing automatically every thumbnail in order to
        // have 2 activity per column and a horizontal scrolling
        function resizeThumbnails(){
            var single_height = ( $(window).height() - $("#mainNavBar").height() ) / 2;
            if( single_height < 250){
                single_height = 250;
            }
            $(".activity-box").height(single_height);
            $(".activity-box").width(single_height);
        }
        $(function() {
            resizeThumbnails();
        })
        $(window).resize(function() { 
            resizeThumbnails();
        });            
    </script>
{% endblock %}